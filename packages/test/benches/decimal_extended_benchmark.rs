use criterion::{BatchSize, Criterion, black_box, criterion_group, criterion_main};
use tests::generated_uniprops::uniprops::{Category, get_digit_value};

const TEST_TEXT: &str =  "\
        ï½—ï¼-ï¼ï¼’ï¼“ï¼”.ï¼“ï¼”ï½†ï½—ï½…ï¼ï¼™ï¼˜ï¼“ï¼’ï¼”ï¼˜ï¼™ï¼’ï¼“ï¼™ï½’ï¼˜ï¼)ï¼™ï¼™ï½†ï½„ï½“ï½†
        ğ°ğŸ-ğŸğŸğŸ‘ğŸ’.ğŸ‘ğŸ’ğŸğ°ğğŸğŸ—ğŸ–ğŸ‘ğŸğŸ’ğŸ–ğŸ—ğŸğŸ‘ğŸ—ğ«ğŸ–ğŸ)ğŸ—ğŸ—ğŸğğ¬ğŸ
        ğ–œğŸ-ğŸğŸğŸ‘ğŸ’.ğŸ‘ğŸ’ğ–‹ğ–œğ–ŠğŸğŸ—ğŸ–ğŸ‘ğŸğŸ’ğŸ–ğŸ—ğŸğŸ‘ğŸ—ğ–—ğŸ–ğŸ)ğŸ—ğŸ—ğ–‹ğ–‰ğ–˜ğ–‹
        ğ’˜ğŸ-ğŸğŸğŸ‘ğŸ’.ğŸ‘ğŸ’ğ’‡ğ’˜ğ’†ğŸğŸ—ğŸ–ğŸ‘ğŸğŸ’ğŸ–ğŸ—ğŸğŸ‘ğŸ—ğ’“ğŸ–ğŸ)ğŸ—ğŸ—ğ’‡ğ’…ğ’”ğ’‡
        ğ”€ğŸ-ğŸğŸğŸ‘ğŸ’.ğŸ‘ğŸ’ğ“¯ğ”€ğ“®ğŸğŸ—ğŸ–ğŸ‘ğŸğŸ’ğŸ–ğŸ—ğŸğŸ‘ğŸ—ğ“»ğŸ–ğŸ)ğŸ—ğŸ—ğ“¯ğ“­ğ“¼ğ“¯
        ğ“Œ0-0234.34ğ’»ğ“Œğ‘’09832489239ğ“‡80)99ğ’»ğ’¹ğ“ˆğ’»
        ğ•¨ğŸ˜-ğŸ˜ğŸšğŸ›ğŸœ.ğŸ›ğŸœğ•—ğ•¨ğ•–ğŸ˜ğŸ¡ğŸ ğŸ›ğŸšğŸœğŸ ğŸ¡ğŸšğŸ›ğŸ¡ğ•£ğŸ ğŸ˜)ğŸ¡ğŸ¡ğ•—ğ••ğ•¤ğ•—
        ğš ğŸ¶-ğŸ¶ğŸ¸ğŸ¹ğŸº.ğŸ¹ğŸºğšğš ğšğŸ¶ğŸ¿ğŸ¾ğŸ¹ğŸ¸ğŸºğŸ¾ğŸ¿ğŸ¸ğŸ¹ğŸ¿ğš›ğŸ¾ğŸ¶)ğŸ¿ğŸ¿ğšğšğšœğš
        ğ—ğŸ¢-ğŸ¢ğŸ¤ğŸ¥ğŸ¦.ğŸ¥ğŸ¦ğ–¿ğ—ğ–¾ğŸ¢ğŸ«ğŸªğŸ¥ğŸ¤ğŸ¦ğŸªğŸ«ğŸ¤ğŸ¥ğŸ«ğ—‹ğŸªğŸ¢)ğŸ«ğŸ«ğ–¿ğ–½ğ—Œğ–¿
        ğ˜„ğŸ¬-ğŸ¬ğŸ®ğŸ¯ğŸ°.ğŸ¯ğŸ°ğ—³ğ˜„ğ—²ğŸ¬ğŸµğŸ´ğŸ¯ğŸ®ğŸ°ğŸ´ğŸµğŸ®ğŸ¯ğŸµğ—¿ğŸ´ğŸ¬)ğŸµğŸµğ—³ğ—±ğ˜€ğ—³
        ğ™¬ğŸ¬-ğŸ¬ğŸ®ğŸ¯ğŸ°.ğŸ¯ğŸ°ğ™›ğ™¬ğ™šğŸ¬ğŸµğŸ´ğŸ¯ğŸ®ğŸ°ğŸ´ğŸµğŸ®ğŸ¯ğŸµğ™§ğŸ´ğŸ¬)ğŸµğŸµğ™›ğ™™ğ™¨ğ™›
        ğ˜¸ğŸ¢-ğŸ¢ğŸ¤ğŸ¥ğŸ¦.ğŸ¥ğŸ¦ğ˜§ğ˜¸ğ˜¦ğŸ¢ğŸ«ğŸªğŸ¥ğŸ¤ğŸ¦ğŸªğŸ«ğŸ¤ğŸ¥ğŸ«ğ˜³ğŸªğŸ¢)ğŸ«ğŸ«ğ˜§ğ˜¥ğ˜´ğ˜§
        ğŸ…†0-0234.34ğŸ„µğŸ…†ğŸ„´09832489239ğŸ…80)99ğŸ„µğŸ„³ğŸ…‚ğŸ„µ
        ğŸ††0-0234.34ğŸ…µğŸ††ğŸ…´09832489239ğŸ†80)99ğŸ…µğŸ…³ğŸ†‚ğŸ…µ
        ğŸ‡¼\u{200B}0-0234.34ğŸ‡«\u{200B}ğŸ‡¼\u{200B}ğŸ‡ª\u{200B}09832489239ğŸ‡·\u{200B}80)99ğŸ‡«\u{200B}ğŸ‡©\u{200B}ğŸ‡¸\u{200B}ğŸ‡«
        ğ”´0-0234.34ğ”£ğ”´ğ”¢09832489239ğ”¯80)99ğ”£ğ”¡ğ”°ğ”£
        áºƒ0-0234.34fÌáºƒÃ©09832489239Å•80)99fÌdÌÅ›fÌ
        wÌ¤0-0234.34fÌ¤wÌ¤eÌ¤09832489239rÌ¤80)99fÌ¤dÌ¤sÌ¤fÌ¤
        áº…0-0234.34fÌˆáº…Ã«09832489239rÌˆ80)99fÌˆdÌˆsÌˆfÌˆ
        wÌ¤Ìˆ0-0234.34fÌ¤ÌˆwÌ¤ÌˆeÌ¤Ìˆ09832489239rÌ¤Ìˆ80)99fÌ¤ÌˆdÌ¤ÌˆsÌ¤ÌˆfÌ¤Ìˆ
        Ì¸w0-0234.34Ì¸fÌ¸wÌ¸e09832489239Ì¸r80)99Ì¸fÌ¸dÌ¸sÌ¸f\
    ";

fn benchmark_categories(c: &mut Criterion) {
    c.bench_function("Categories", |b| {
        b.iter_batched(
            || TEST_TEXT.chars().cycle(),
            |mut iter| black_box(Category::from_char(iter.next().unwrap())),
            BatchSize::SmallInput,
        );
    });

    c.bench_function("Digits", |b| {
        b.iter_batched(
            || TEST_TEXT.chars().cycle(),
            |mut iter| black_box(get_digit_value(iter.next().unwrap())),
            BatchSize::SmallInput,
        );
    });

    c.bench_function("Is numeric", |b| {
        b.iter_batched(
            || TEST_TEXT.chars().cycle(),
            |mut iter| black_box(iter.next().unwrap().is_numeric()),
            BatchSize::SmallInput,
        );
    });
}

criterion_group!(benches, benchmark_categories);
criterion_main!(benches);
